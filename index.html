<!DOCTYPE html>
<html lang="en">
<head>
	<!--<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>-->
	<script src="markerclusterer.js" type="text/javascript"></script>
	<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
	<meta charset="UTF-8">
	<title>A Basic Map</title>
	<style>
		#map {
			height: 100%;
		}
		/* Optional: Makes the sample page fill the window. */
		html, body {
			height: 100%;
			margin: 0;
			padding: 0;
		}
	</style>
	<script>
	var marker;
	function initMap() {
		var mapOptions = {
			zoom: 8,
			center: new google.maps.LatLng(52, 5),
			mapTypeId: 'roadmap'
		};
		var map = new google.maps.Map(document.getElementById('map'), mapOptions);
		$.ajax({
	type: "GET",
	async: true,
	url: "c207.xml",
	dataType: "xml",
	success:
	function (xml) {
     $(xml).find('Row').each(function(){
			 			var image = "marker.ico";
            //Read the latitude and longitude for each Marker
					//	var name = $(this).find('id').text();
            var lat = $(this).find('Latitude').text();
            var lng = $(this).find('Longitude').text();
            var markerCoords = new google.maps.LatLng(parseFloat(lat),
                                                      parseFloat(lng));
						marker = new google.maps.Marker({position: markerCoords, map:map, icon:image});
        });
    }
	});
	var markercluster = new MarkerClusterer(map, marker, {imagePath: 'https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m'});
	}
	</script>
</head>
<body>
<div id="map"></div>
<script async defer
		src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD_-LVJd5_z6exAoE3HGRLsgNGgKTKQGQM&callback=initMap">
</script>
</body>
</html>
